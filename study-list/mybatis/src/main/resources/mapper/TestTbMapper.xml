<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gupaoedu.mapper.TestTbMapper">

    <!--
      根据ID查询数据
    -->
    <select id="selectTestTbById" resultType="com.gupaoedu.domain.TestTb">
           select  * from ${tbName} where id = ${id}
    </select>


   <!--
   一对一查询 (嵌套结果查询)
   -->
   <resultMap id="TestDbAndBlogRstMap" type="com.gupaoedu.domain.associate.TestDbAndBlog" >
       <id column="id" property="id" jdbcType="INTEGER" javaType="integer"/>
       <result column="name" property="name" jdbcType="VARCHAR" javaType="string"/>
       <association property="blog" javaType="com.gupaoedu.domain.Blog">
           <id column="bid" property="bid"/>
           <result column="blogName" property="name"/>
           <result column="author_id" property="authorId"/>
       </association>
   </resultMap>

    <select id="selectTestDbAndBlogRst" resultMap="TestDbAndBlogRstMap" >
        SELECT
            tt.id,
            tt.name,
            bg.bid,
            bg.name as blogName,
            bg.author_id
        FROM
            test_tb tt
            LEFT JOIN blog bg ON tt.bid = bg.bid
        WHERE
            tt.id = #{id} or tt.id = #{id}
    </select>


    <!--
      一对一查询 （嵌套查询）
    -->
    <resultMap id="TestDbAndBlogRstMap2" type="com.gupaoedu.domain.associate.TestDbAndBlog" >
        <id column="id" property="id" jdbcType="INTEGER" javaType="integer"/>
        <result column="name" property="name" jdbcType="VARCHAR" javaType="string"/>
        <association property="blog" javaType="com.gupaoedu.domain.Blog"
                     column="bid" select="com.gupaoedu.mapper.BlogMapper.selectBlogById"/>
    </resultMap>

    <select id="selectTestTbById2" resultMap="TestDbAndBlogRstMap2">
        select * from test_tb where id = #{id};
    </select>




</mapper>